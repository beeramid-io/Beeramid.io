<link rel="stylesheet" href="css/firstConnection.css">

<div id="firstConnectionContainer">
  <div id="imageHolder">

  </div>
  
  <div id="formId">
    <form action="setNickname" method="post" id="nicknameForm">
      <div><span id="errorMessage"></span></div>
      <br/>
      <input id="nicknameInput" name="nickname" type="text" placeHolder="Nickname..." required />
      <br/>
      <input id="continueButton" type="button" value="Continue">
      <!-- <input id="submitButton" type="submit" value="Continue"> -->
      <div id="myModal" class="modal">
        <div class="modal-content">
          <div>
            <h3>Beeramid.io's policy</h3>
            <h4>Legal Drinking Age Required:</h4>
            <p>
              You must be of legal drinking age to access this Site. Beeramid.io does not sell or serve alcohol, nor does it incite people to drink alcohol. By accessing Beeramid.io, you swear and affirm that you are over the age of 18. If you do not agree with these conditions of use please do not use this Site.
            </p>
            <h4>Cookies:</h4>
            <p>
              We use cookies to keep you connected to our website. By clicking "Accept", you agree to our use of cookies.
            </p>
          </div>
          <div>
            <input id="submitButton" type="submit" value="Accept">
          </div>
        </div>
      </div>
    </form>
  </div>
</div>


<script>
  var img = document.createElement("IMG"); 
  img.setAttribute("src", "/image/BeeramidLogoIO.png");
  img.setAttribute("height", "300");
  img.setAttribute("id", "imageLogo")
  document.getElementById("imageHolder").appendChild(img);
 
  var modal = document.getElementById("myModal");
  var btn = document.getElementById("continueButton");
  var input = document.getElementById("nicknameInput");
  var submitBtn = document.getElementById("submitButton");

  function showModal() { modal.style.display = "block"; }
  function hideModal() { modal.style.display = "none"; }

  // When the user clicks the button, open the modal 
  btn.onclick = function() {
    if (input.value.length == 0) {
      input.focus();
    }
    else {
      showModal();
    }
  }

  //Disable 'enter' key, to not submit form without having the modal pop-up 
  $(document).ready(function() {
    $(window).keydown(function(event){
      if(event.keyCode == 13) {
        event.preventDefault();
        btn.click();
        return false;
      }
      if(event.keyCode == 27) {
        event.preventDefault();
        hideModal();
        return false;
      }
    });
  });
  
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      hideModal();
    }
  }

  if(data.roomId != null && data.roomId != '') {
  	var $form = $('#nicknameForm');
  	var $roomInput = $('<input/>');
  	$roomInput.attr('name', 'roomId');
  	$roomInput.attr('type', 'hidden');
  	$roomInput.attr('value', data.roomId);
  	$form.append($roomInput);  	
  }

  if (typeof data.errorMessage !== 'undefined') {
    $('#errorMessage').html(data.errorMessage);
  }
</script>